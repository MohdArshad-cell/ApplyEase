<style>
    /* Main Layout */
    .guest-dashboard-layout { display: flex; gap: 2rem; }
    .guest-sidebar { flex: 0 0 250px; background-color: var(--card-bg); padding: 2rem; border-radius: 15px; border: 1px solid var(--border-color); }
    .guest-main-content { flex: 1; }
    
    /* Sidebar Navigation */
    .guest-sidebar-nav a { display: block; padding: 0.75rem 1rem; color: var(--text-secondary); text-decoration: none; font-weight: 500; border-radius: 8px; margin-bottom: 0.5rem; transition: background-color 0.3s, color 0.3s; }
    .guest-sidebar-nav a:hover, .guest-sidebar-nav a.active { background-color: rgba(0, 246, 255, 0.1); color: var(--accent-cyan); }
    
    /* Welcome Banner */
    .welcome-banner-guest { background-image: linear-gradient(90deg, rgba(98, 72, 255, 0.2), rgba(0, 246, 255, 0.1)); padding: 2rem; border-radius: 15px; margin-bottom: 2rem; border: 1px solid var(--border-color); }
    #welcome-message { font-size: 1.8rem; font-weight: 600; color: var(--text-primary); margin: 0 0 0.5rem 0; }
    #welcome-subtitle { color: var(--text-secondary); margin-top: 0.5rem; }

    /* Onboarding Steps */
    .onboarding-steps { background-color: var(--card-bg); padding: 2rem; border-radius: 15px; border: 1px solid var(--border-color); margin-bottom: 2rem; }
    .onboarding-steps h3 { font-size: 1.5rem; font-weight: 600; margin-top: 0; margin-bottom: 2rem; }
    .step { display: flex; gap: 1.5rem; margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border-color); }
    .step:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .step-number { width: 40px; height: 40px; background-color: var(--dark-bg); border: 2px solid var(--accent-cyan); color: var(--accent-cyan); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0; }
    .step-info h4 { font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin: 0 0 0.5rem 0; }
    .step-info p { color: var(--text-secondary); margin: 0; }

    /* NEW: Trial Widget & Testimonial Styles */
    .guest-widgets-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
    .trial-widget, .testimonial-card { background-color: var(--card-bg); padding: 2rem; border-radius: 15px; border: 1px solid var(--border-color); }
    .trial-widget h3, .testimonial-card h3 { font-size: 1.2rem; font-weight: 600; margin-top: 0; margin-bottom: 1rem; color: var(--accent-cyan); }
    .trial-widget p { color: var(--text-secondary); margin-top: 0; font-size: 0.9rem; }
    .trial-widget button { margin-top: 1rem; }
    .testimonial-quote { font-style: italic; color: var(--text-primary); border-left: 3px solid var(--accent-cyan); padding-left: 1rem; margin: 0; }
    .testimonial-author { text-align: right; margin-top: 1rem; font-weight: 600; }
    .testimonial-author span { display: block; font-weight: 400; font-size: 0.85rem; color: var(--text-secondary); }

    @media (max-width: 992px) {
        .guest-dashboard-layout { flex-direction: column; }
        .guest-sidebar { flex: 0 0 auto; }
        .guest-widgets-grid { grid-template-columns: 1fr; }
    }
</style>

<div class="guest-dashboard-layout">
    <aside class="guest-sidebar">
        <nav class="guest-sidebar-nav">
            <a href="#" class="active" data-link="dashboard">Dashboard</a>
            <a href="application-guest.html" data-link="applications">Applications</a>
            <a href="#" data-link="profile">Profile</a>
        </nav>
    </aside>

    <div class="guest-main-content">
        <div class="welcome-banner-guest">
            <h1 id="welcome-message">Welcome to AplyEase!</h1>
            <p id="welcome-subtitle">You're just a few steps away from automating your job search.</p>
        </div>

        <div class="guest-widgets-grid">
            <div class="trial-widget">
                <h3>Try a Limited AI Scan</h3>
                <p>See how our AI analyzes resumes. You have <span id="trial-count">2</span> free scans remaining.</p>
                <button id="trial-button" class="btn btn-primary">Use a Free Scan</button>
            </div>
            <div class="testimonial-card">
                <h3>Trusted by Professionals</h3>
                <blockquote class="testimonial-quote">
                    "AplyEase is a game-changer. I went from 50+ applications to 3 competitive offers in a month."
                </blockquote>
                <figcaption class="testimonial-author">
                    - Alex Johnson <span>Software Engineer at TechCorp</span>
                </figcaption>
            </div>
        </div>

        <div class="onboarding-steps" style="margin-top: 2rem;">
            <h3>How to Get Started</h3>
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-info">
                    <h4>Choose a Plan</h4>
                    <p>Get matched with a dedicated assistant who applies to jobs for you.</p>
                    <a href="/pricing.html" class="btn btn-primary" style="margin-top: 1rem;">View Plans & Pricing</a>
                </div>
            </div>
            </div>
    </div>
</div>

<script>
    // This script will only run when this partial is loaded
    document.addEventListener('DOMContentLoaded', () => {
        // --- "Upgrade-Aware" Sidebar Logic ---
        const lockedLinks = document.querySelectorAll('.guest-sidebar-nav a[data-link="applications"], .guest-sidebar-nav a[data-link="profile"]');
        lockedLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                alert('This feature is for subscribed clients only. Please choose a plan to continue!');
                window.location.href = '/pricing.html';
            });
        });

        // --- "Limited Trial" Widget Logic ---
        const trialButton = document.getElementById('trial-button');
        const trialCountSpan = document.getElementById('trial-count');
        let trials = 2;

        trialButton.addEventListener('click', () => {
            if (trials > 0) {
                trials--;
                trialCountSpan.textContent = trials;
                alert('Success! A sample AI analysis would be shown here.');
                if (trials === 0) {
                    trialButton.textContent = 'Upgrade to Scan More';
                    trialButton.onclick = () => { window.location.href = '/pricing.html'; };
                }
            }
        });
    });
</script>